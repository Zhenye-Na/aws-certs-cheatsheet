<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.1"><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="Database on AWS" /><meta name="author" content="Zhenye Na" /><meta property="og:locale" content="en_US" /><meta name="description" content="Choose the right database:" /><meta property="og:description" content="Choose the right database:" /><link rel="canonical" href="https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/" /><meta property="og:url" content="https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/" /><meta property="og:site_name" content="AWS Cert. Cheatsheet" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-29T00:00:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Database on AWS" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Zhenye Na"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/"},"description":"Choose the right database:","url":"https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/","@type":"BlogPosting","headline":"Database on AWS","dateModified":"2021-01-10T22:14:09-08:00","datePublished":"2020-07-29T00:00:00-07:00","@context":"https://schema.org"}</script><title>Database on AWS | AWS Cert. Cheatsheet</title><link rel="shortcut icon" href="/aws-certs-cheatsheet/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/aws-certs-cheatsheet/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/aws-certs-cheatsheet/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/aws-certs-cheatsheet/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/aws-certs-cheatsheet/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/aws-certs-cheatsheet/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/aws-certs-cheatsheet/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/aws-certs-cheatsheet/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/aws-certs-cheatsheet/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/aws-certs-cheatsheet/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/aws-certs-cheatsheet/assets/css/post.css" as="style"><link rel="stylesheet" href="/aws-certs-cheatsheet/assets/css/post.css"><link rel="preload" as="style" href="/aws-certs-cheatsheet/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/aws-certs-cheatsheet/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/aws-certs-cheatsheet/assets/js/post.min.js"></script> <script defer src="/aws-certs-cheatsheet/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script> <script data-ad-client="ca-pub-6161588707523400" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/aws-certs-cheatsheet/" alt="avatar" class="mx-auto"> <img src="/aws-certs-cheatsheet/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/aws-certs-cheatsheet/">AWS Cert. Cheatsheet</a></div><div class="site-subtitle font-italic">Cheatsheets for AWS Certified Exams.</div></div><ul class="w-100"><li class="nav-item"> <a href="/aws-certs-cheatsheet/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/aws-certs-cheatsheet/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/aws-certs-cheatsheet/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/aws-certs-cheatsheet/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/aws-certs-cheatsheet/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/zhenye-na" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['nazhenye','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/aws-certs-cheatsheet/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/aws-certs-cheatsheet/"> Posts </a> </span> <span>Database on AWS</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Database on AWS</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 29, 2020, 12:00 AM -0700" > Jul 29, 2020 <i class="unloaded">2020-07-29T00:00:00-07:00</i> </span> by <span class="author"> Zhenye Na </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jan 10, 2021, 10:14 PM -0800" > Jan 10, 2021 <i class="unloaded">2021-01-10T22:14:09-08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2150 words">11 min</span></div></div><div class="post-content"><p><strong>Choose the right database</strong>:</p><ul><li>balanced workload or heavy-read or heavy-write?<li>throughput, does it fluctuate or something predictable<li>how much data to store, how long? average object size<li>data durability<li>latency requirement<li>data model<li>strong schema or flexible, SQL or NoSQL<li>License costs</ul><p>Database types which are supported by AWS:</p><ul><li>Relational Database<ul><li>RDS<ul><li>Postgres<li>MySQL<li>MariaDB<li>Oracle<li>Microsoft SQL Server</ul><li>Aurora (* AWS Proprietary database)</ul><li>NoSQL<ul><li>DynamoDB (~ JSON)<li>ElastiCache (key-value pairs)<li>Neptune (graphs) - no joins, no SQL</ul><li>Object Store (“sort of”)<ul><li>S3<li>Glacier</ul><li>Data Warehouse<ul><li>Redshift<li>Athena (query data in S3 using SQL, so “sort of”)</ul></ul><h2 id="rds-overview">RDS Overview</h2><p>RDS is a managed service:</p><ul><li>Automated provisioning, OS patching<li>Continuous backups and restore to specific timestamp (Point in Time Restore)<li>Monitoring dashboard<li>Read replicas for improved read performance<li>Multi-AZ setup for Disaster Recovery<li>Maintenance windows for upgrades<li>Scaling capability (vertical and horizontal)<li>Storage backed by EBS (gp2 or io1)</ul><p><strong>BUT, you cannot SSH into your instances</strong></p><p>There are two important features for RDS</p><ul><li>Multi-AZ: this is for “Disaster Recovery”<li>Read Replicas: this is for “Improving Performance”</ul><p><strong>OLTP vs OLAP</strong></p><p>OLAP is for Data Warehousing on AWS (a different type of architecture both from a database perspective and infrastructure layer)</p><hr /><p><strong>ElasticCache</strong></p><p>This is a service for a web app, it is easy to deploy, operate, and scale an <em>in-memory cache</em> in the cloud.</p><p>It speeds up the performance of existing databases’ frequent identical queries</p><p><strong>RedShift</strong></p><p>This is for BI / Data warehousing -&gt; OLAP usage</p><hr /><p><strong>Relational Database</strong></p><ul><li>RDS runs on a virtual machine, but you cannot ssh to it<li><strong>RDS is NOT serverless, BUT Aurora Serverless IS Serverless</strong></ul><h3 id="rds---backups-multi-az--read-replicas">RDS - Backups, Multi-AZ &amp; Read Replicas</h3><h4 id="backups">Backups</h4><p>There are two types of Backups for RDS</p><ol><li>Automated Backups<li>Database Snapshots</ol><h5 id="automated-backups">Automated Backups</h5><p>It allows users to recover your database to any point in time within a “Retention Period”, this is around 7 ~ 35 days.</p><p>Automated backup is enabled by default, the backup data is stored in S3, meanwhile, the size of your RDS is equal to the size of S3</p><div class="alert alert-secondary" role="alert"><p>Automated backups:</p><ul><li>Daily full backup of the database (during the maintenance window)<li>Transaction logs are backed-up by RDS every 5 minutes<li>This gives the ability to restore to any point in time (from oldest back-up to 5 minutes ago)</ul></div><h5 id="database-snapshot">Database Snapshot</h5><p>Database Snapshot is stored even after you delete the original RDS Instance</p><p>But it is manually triggered by the user, and retention of backup for as long as you want</p><h4 id="multi-az">Multi-AZ</h4><ul><li>It has only one DNS name, automatic app failover to standby, no manual intervention in apps<li>This is an exact copy of your production database in <code class="language-plaintext highlighter-rouge">another AZ</code><li>Automatically synchronized when your prod database is written to<li>In the event of the following:<ul><li>planned database maintenance<li>DB instance failure<li>AZ failure<li>Network failure</ul></ul><p>This is only for <strong>Disaster Recovery</strong>, increase <em>availability</em></p><h4 id="read-replicas">Read Replicas</h4><p>This allows you to have a read-only copy of your production database.</p><p>This is achieved by using <strong>asynchronously</strong> replication from the primary RDS Instance to the Read Replicas. It is better for those databases with heavy read workloads</p><blockquote><p>Read replicas are used for SELECT (or read) the only kind of tasks, not INSERT, DELETE or UPDATE</p></blockquote><div class="alert alert-success" role="alert"><p>Be careful of the difference between Read Replicas and the previous database backup methods</p><ol><li>Read Replica is for scaling, for performance improvements<li>To use Read Replicas, you should turn on the setting for &quot;Automated Backups&quot;<li>You can have up to 5 Read replicas of any database<li>You can even have Read replicas of Read replicas<li>Each Read replicas has its Endpoint<li>Read replicas can be prompted to be their database, but replications won&#39;t work</ol></div><h5 id="read-replicas---network-cost">Read Replicas - Network Cost</h5><p>In AWS, there is a network cost when data goes from one AZ to another, so to reduce cost, you can have your Read Replicas in the same AZ</p><h3 id="rds-securities">RDS Securities</h3><h4 id="encryptions">Encryptions</h4><p>This is achieved by using AWS KMS (Key Management Service), once the encryption is on, the followings are encrypted:</p><ul><li>data underlying storage<li>automated backups<li>read replicas<li>database snapshots</ul><div class="alert alert-success" role="alert"><p>Whenever you restore either an Automated Backup or Database Snapshot, the restored version of the database will be a <strong>new</strong> RDS instance with a <strong>new</strong> DNS endpoint</p></div><h5 id="at-rest-encryption-and-in-flight-encryption">At rest encryption and In-flight encryption</h5><p><strong>At rest encryption</strong></p><p>We can encrypt the primary DB and read replicas with AWS KMS - AES - 256 encryption, this has to be defined at launch time.</p><p>If the primary DB is not encrypted, the read replicas cannot be encrypted</p><blockquote><p>or, unencrypted DB -&gt; snapshot -&gt; copy snapshot as encrypted -&gt; create new DB from encrypted snapshot</p></blockquote><p>Transparent Data Encryption (TDE) available for Oracle and SQL Server</p><p><strong>In-flight encryption</strong></p><p>This allows to use SSL Certificates to encrypt data to RDS in flight, you have to provide SSL options with trust certificate when connecting to the database</p><h4 id="network--iam">Network &amp; IAM</h4><p><strong>Network Security</strong></p><ul><li>RDS databases are usually deployed with a private subnet, not in a public one<li>RDS security works by leveraging security groups, it controls which IP / security group can <strong>communicate</strong> with RDS</ul><p><strong>Access Management</strong></p><ul><li>IAM policies help control who can manage AWS RDS through the RDS API, like “who can create a read replica? etc..”<li>traditional username/password can be used to log into the database<li>IAM-based authentication can be used to login to RDS MySQL &amp; PostgreSQL</ul><h5 id="iam-authentication">IAM Authentication</h5><ul><li>works with MySQL &amp; PostgreSQL<li>no need for a password, just a token obtained through IAM &amp; RDS API call<li>the token has a lifetime of 15 minutes</ul><p>the IAM Authentication has the following benefits:</p><ul><li>Network in/out must be encrypted using SSL<li>IAM to centrally manage users instead of DB<li>Can leverage IAM Roles and EC2 Instance profiles for easy integration</ul><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6161588707523400" data-ad-slot="2418749784"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p><h2 id="aurora">Aurora</h2><p>Aurora is the MySQL compatible, AWS solution to Relational Database</p><h3 id="aurora-ha-and-scalability">Aurora HA and Scalability</h3><p>Aurora always maintains <strong>2 copies of your data in each AZ</strong>, with a <strong>minimum of 3 AZ</strong> =&gt; which leads to <strong>6 copies</strong> of your data</p><p>Among these 6 copies of your data across 3 AZ:</p><ul><li>4 copies out of 6 needed for writes<li>3 copies out of 6 needed for reads<li>self-healing with peer-to-peer replication<li>storage is striped across 100s of volumes</ul><p>There is a <code class="language-plaintext highlighter-rouge">primary-secondary</code> architecture, one Aurora instance will take writes (<code class="language-plaintext highlighter-rouge">primary</code>)</p><p>If there is a failover happened, the automated failover for primary DB will take effect in less than 30 seconds</p><p>You can have up to 15 Aurora Read Replicas serve reads, the read replicas support Cross Region Replication</p><h3 id="aurora-replicas">Aurora Replicas</h3><p>There are 2 types of Aurora Replicas</p><ol><li>Aurora Replicas<li>MySQL Read Replicas</ol><blockquote><p>Automated failover is only available with Aurora Replicas</p></blockquote><p>Backups for Aurora, also 2 types:</p><ol><li>Automated Backups<li>Data Snapshots</ol><div class="alert alert-secondary" role="alert"><p>To migrate data from MySQL to Aurora, you can do the following things</p><ul><li>take a data snapshot and restore in Aurora<li>create an Aurora Read replica and then promote the Read Replica as a &quot;database service&quot;</ul></div><h3 id="aurora-db-cluster">Aurora DB Cluster</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/Zhenye-Na/img-hosting-picgo/master/img/aurora-db-cluster.png" alt="" /></p><blockquote><p>load balancing happens during connection</p></blockquote><h3 id="aurora-serverless">Aurora Serverless</h3><ul><li>Automated database instantiation and autoscaling based on actual usage<li>good for infrequent, intermittent, or unpredictable workloads<li>no capacity planning needed<li>pay per second, can be more cost-effective</ul><blockquote><p>Aurora Serverless will create Aurora instance, and the client will connect to Aurora with <code class="language-plaintext highlighter-rouge">Proxy Fleet</code>, with auto-scaling turned on, which means: if the QPS is large, then more Aurora instances will be created, otherwise, will be deleted</p></blockquote><h3 id="global-aurora">Global Aurora</h3><ul><li>Aurora Cross Region Read Replicas<ul><li>Useful for disaster recovery<li>Simple to put in place</ul><li>Aurora Global Database (recommended)<ul><li>1 Primary Region (read / write)<li>Up to 5 secondary (read-only) regions, replication lag is less than 1 second<li>Up to 16 Read Replicas per secondary region, helps for decreasing latency<li>Promoting another region (for disaster recovery) has an RTO (Recovery Time Objective) of &lt; 1 minute</ul></ul><h2 id="elasticache">ElastiCache</h2><p>This is the AWS solution to the web-service-based in-memory cache</p><h3 id="elasticcache-overview">ElasticCache Overview</h3><ul><li>The same way RDS is to get managed Relational Databases<li>ElastiCache is to get managed Redis or Memcached<li>Helps reduce the load off of databases for reading-intensive workloads<li>Make application stateless<li>Write Scaling using <strong>Sharding</strong><li>Read Scaling using <strong>Read Replicas</strong><li>Multi-AZ with failover Capability<li>AWS takes care of OS maintenance/patching, optimizations, setup, configuration, monitoring, failure recovery, and backups</ul><h4 id="db-cache">DB Cache</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://d2908q01vomqb2.cloudfront.net/887309d048beef83ad3eabf2a79a64a389ab1c9f/2019/10/01/Caching-for-performance-A.jpg" alt="" /></p><blockquote><p>Application queries ElastiCache first, if data is not available (cache miss) then get data from RDS and store in ElastiCache, so that for the later queries, it will reach cache hit</p></blockquote><h4 id="user-session-store">User Session Store</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/Zhenye-Na/img-hosting-picgo/master/img/user-session-store.svg" alt="" /></p><ul><li>User login to any of the application<li>The application writes the session data into ElastiCache<li>The user hits another instance of our application<li>The instance retrieves the data and the user is already logged in</ul><h3 id="elasticache---redis-or-memcached">ElastiCache - Redis or Memcached</h3><div class="table-wrapper"><table><thead><tr><th>Redis<th>Memcached<tbody><tr><td><strong>Multi-AZ</strong> with Auto-Failover<td>Multi-node for the partitioning of data (sharding)<tr><td>Read Replicas to scale reads and have high availability<td><strong>Nonpersistent</strong><tr><td>Data Durability using AOF persistence<td><strong>No backup and restore</strong><tr><td>Backup and restore feature<td>Multi-threaded architecture</table></div><ul><li>If you need scale horizontally, you need to choose Memcached<li>If you need Multi-AZ, Backups, and Restores, you need to choose Redis</ul><div class="alert alert-success" role="alert"><p>Right now, we have two methods of improving performance</p><ol><li>ElasticCache -&gt; Cache layer to speed up<li>Read Replicas -&gt; Improved read/write on the database layer</ol></div><h3 id="elasticache---cache-security">ElastiCache - Cache Security</h3><p>All caches in ElastiCache:</p><ul><li>support SSL in-flight encryption<li><strong>Do not support IAM authentication</strong><li>IAM policies on ElastiCache are only used for AWS API-level security</ul><p><strong>Redis AUTH</strong></p><ul><li>You can set a “password/token” when you create a Redis Cluster<li>This is an extra level of security for your cache (on top of Security Group)</ul><p>Memcached</p><ul><li>Supports SASL-based authentication</ul><h3 id="elasticache-for-solutions-architects">ElastiCache for Solutions Architects</h3><p>Patterns for ElastiCache</p><ol><li>Lazy Loading: all the read data is cached, data can become stale in the cache<li>Write Through: Adds or Update data in the cache when written to a DB (no stale data)<li>Session Store: store temp session data in the cache (using TTL features)</ol><h2 id="dynamodb">DynamoDB</h2><blockquote><p>DynamoDB can do transactions now</p></blockquote><p>DynamoDB is AWS solution for <strong>Serverless</strong> NoSQL datbase, it supports <strong>document</strong> and <strong>key-value pair</strong> data models</p><ol><li>data is stored ion SSD Storage<li>High available with replication across <strong>3</strong> AZ (geographically distinct data centers)<li><strong>Eventually Consistent Reads</strong> (Default)<li>Strongly Consistent Reads</ol><div class="alert alert-danger" role="alert"><p><strong>Eventually Consistent Reads</strong></p><p>Consistency across all copies of data is usually reached within a second. Repeating a read after a short time should return the updated data.</p><p>This is for &quot;Best Read Performance&quot;, this setting is enabled by default</p><p><strong>Strongly Consistent Reads</strong></p><p>A Strongly Consistent Read returns result that reflects all writes that received a successful response before the read</p></div><h3 id="dynamodb---basics">DynamoDB - Basics</h3><ul><li>DynamoDB is made of <strong>tables</strong><li>Each table has a <strong>primary key</strong> (must be decided at creation time)<li>Each table can have an infinite number of items (= rows)<li>Each item has <strong>attributes</strong> (can be added over time - can be null)<li>Maximum size of an item is 400 KB</ul><h3 id="dynamodb---provisioned-throuput">DynamoDB - Provisioned Throuput</h3><ul><li>Table must have provisioned read and write capacity units<li><strong>Read Capacity Units (RCU)</strong>: throughput for reads<ul><li>1 RCU: 1 strongly consistent read of 4 KB per second<li>1 RCU: 2 eventually consistent read of 4 KB per second</ul><li><strong>Write Capacity Units (WCU)</strong>: throughput for writes<ul><li>1 WCU: 1 write of 1 KB per second</ul><li>Option to set up auto-scaling of throughput to meet demand<li>Throughput can be exceeded temporarily using “burst credit”<li>If burst credit is empty, you’ll get a <code class="language-plaintext highlighter-rouge">"ProvisionedThroughputException"</code><li>It’s then advised to do an exponential back-off retry</ul><h3 id="dynamodb---dax">DynamoDB - DAX</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/Zhenye-Na/img-hosting-picgo/master/img/dax_high_level.e4af7cc27485497eff5699cdf22a9502496cba38.png" alt="" /></p><p>DAX is DynamoDB Accelerator, it provide <strong>seamless cache</strong> for DynamoDB, no application re-write needed. Writes go through DAX then to DynamoDB.</p><p>Multi-AZ is supported, 3 nodes minimum recommended for production</p><h3 id="dynamodb-streams">DynamoDB Streams</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://raw.githubusercontent.com/Zhenye-Na/img-hosting-picgo/master/img/DDB-Stream1.png" alt="" /></p><ul><li>Changes in DynamoDB will end up in a DynamoDB Stream<li>This stream can be read by AWS Lambda, so we can do analytical jobs<li>Could implement cross-region replication using Streams<li>It has 24 hours of data retention</ul><h3 id="dynamodb---security">DynamoDB - Security</h3><ul><li>VPC Endpoints available to access DynamoDB without internet<li>Access fully controlled by IAM<li>Encryption: KMS and SSL/TLS</ul><h3 id="dynamodb---other-features">DynamoDB - Other Features</h3><p>Global Tables:</p><ul><li>Active-Active replication in many regions<li>Must enable DynamoDB Streams<li>It is Low-latency, for Disaster Recovery</ul><p>Capacity Planning:</p><ul><li>Planned capacity: provision WCU &amp; RCU can enable auto-scaling<li>ON-demand capacity: get unlimited WCU &amp; RCU, no throttle, more expensive</ul><blockquote><p>rare workloads - on-demand capacity</p><p>predictable workloads which can be auto-scaled - planned capacity</p></blockquote><p>other features like, backup &amp; restore, migration and you can even set up a local DYnamoDB for development</p><h2 id="redshift">RedShift</h2><p>This is the AWS solution to Data Warehousing service, it supports <strong>Massively Parallel Processing (MPP)</strong></p><h3 id="backups-for-redshift">Backups for RedShift</h3><ul><li>this is <strong>enabled</strong> by default and it has <strong>1</strong> day retention period, and the maximum is 35 days<li>always attempt to maintain <strong>at least 3 copies</strong> of your data, the original or the replicas on the compute node, the backups are on AWS S3</ul><p><strong>But it is only available in one AZ</strong></p><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6161588707523400" data-ad-slot="2418749784"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p><h2 id="neptune">Neptune</h2><p>Fully managed graph database</p><ul><li>high relationship data<li>social network<li>knowledge graph</ul><p>Highly available across 3 AZ, with up to 15 read replicas, with point-in-time recovery, continuous backup to Amazon S3. Support KMS encryption at rest + HTTPS</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/aws-certs-cheatsheet/categories/aws-saa/'>AWS-SAA</a>, <a href='/aws-certs-cheatsheet/categories/database/'>Database</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/aws-certs-cheatsheet/tags/database/" class="post-tag no-text-decoration" >Database</a> <a href="/aws-certs-cheatsheet/tags/rds/" class="post-tag no-text-decoration" >RDS</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Database on AWS - AWS Cert. Cheatsheet&url=https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Database on AWS - AWS Cert. Cheatsheet&u=https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Database on AWS - AWS Cert. Cheatsheet&url=https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/aws-certs-cheatsheet/posts/vpc/">Virtual Private Cloud (VPC) ★★★</a><li><a href="/aws-certs-cheatsheet/posts/ha-elb-asg/">High Availability and Scalability - ELB & ASG</a><li><a href="/aws-certs-cheatsheet/posts/aws-applications/">AWS Applications</a><li><a href="/aws-certs-cheatsheet/posts/serverless/">Serverless</a><li><a href="/aws-certs-cheatsheet/posts/s3/">Simple Storage Service (S3)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/aws-certs-cheatsheet/tags/asg/">ASG</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/audit/">Audit</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/aws-applications/">AWS Applications</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/cli/">CLI</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/database/">Database</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/discussions/">Discussions</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/dr/">DR</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/ec2/">EC2</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/elb/">ELB</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/encryption/">Encryption</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/aws-certs-cheatsheet/posts/vpc/"><div class="card-body"> <span class="timeago small" > Sep 2, 2020 <i class="unloaded">2020-09-02T00:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Virtual Private Cloud (VPC) ★★★</h3><div class="text-muted small"><p> Virtual Private Cloud (VPC) ★★★ Amazon Virtual Private Cloud Documentation VPC lets us provision a logically isolated section of our infrastructure where we can launch AWS resources in a vi...</p></div></div></a></div><div class="card"> <a href="/aws-certs-cheatsheet/posts/ha-elb-asg/"><div class="card-body"> <span class="timeago small" > Sep 24, 2020 <i class="unloaded">2020-09-24T00:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>High Availability and Scalability - ELB & ASG</h3><div class="text-muted small"><p> Scalability When it comes to scalability, it divides into two parts: Horizontal Scalability -&gt; elasticity, we also call this scale up and scale down Vertical Scalability -&gt; we also cal...</p></div></div></a></div><div class="card"> <a href="/aws-certs-cheatsheet/posts/aws-applications/"><div class="card-body"> <span class="timeago small" > Oct 4, 2020 <i class="unloaded">2020-10-04T00:00:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AWS Applications</h3><div class="text-muted small"><p> 2 types/patterns of application communication synchronous communications asynchronous / event-based (job queue) Synchronous between applications could be problematic if there are sudden spi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/aws-certs-cheatsheet/posts/storage/" class="btn btn-outline-primary"><p>EBS, EFS and Storage Gateway</p></a> <a href="/aws-certs-cheatsheet/posts/route53/" class="btn btn-outline-primary"><p>Route53 - DNS Server</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="font-italic text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/aws-certs-cheatsheet/assets/js/lib/jquery.disqusloader.min.js"></script> <script> var options = { scriptUrl: '//zhenye.disqus.com/embed.js', disqusConfig: function() { this.page.url = 'https://zhenye-na.github.io//aws-certs-cheatsheet/posts/database/'; this.page.identifier = '/posts/database/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/Zhenye-Na/aws-certs-cheatsheet">Zhenye Na</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/aws-certs-cheatsheet/tags/asg/">ASG</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/audit/">Audit</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/aws-applications/">AWS Applications</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/cli/">CLI</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/database/">Database</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/discussions/">Discussions</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/dr/">DR</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/ec2/">EC2</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/elb/">ELB</a> <a class="post-tag" href="/aws-certs-cheatsheet/tags/encryption/">Encryption</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/aws-certs-cheatsheet/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zhenye-na.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
